@*@model IEnumerable<accounting.Models.users>*@
@model accounting.ViewModels.UsersIndexVM
@using accounting.Helpers

@{
    ViewBag.Title = "Usuarios";
}

<h2>Usuarios</h2>

<p>
    @Html.ActionLink("Crear Nuevo", "Create")
</p>

@using (Html.BeginForm("Index", "Users", FormMethod.Post, new { page = 1 }))
{
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row">
                <div class="col-xs-3">
                    @*@Html.LabelFor(m => m.name)*@
                    <div class="input-group">
                        @Html.TextBoxFor(m => m.name, new { @class = "form-control", @placeholder = "nombre", @style = "max-width:100%;" })
                        <span class="input-group-btn">
                            <button class="btn btn-success" type="submit">Buscar</button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<table class="table">
    <tr>
        @*<th>
            @Html.Label("id")
        </th>*@
        <th>
            @Html.Label("nombre")
        </th>
        <th>
            @Html.Label("nombre usuario")
        </th>
        <th>
            @Html.Label("rol")
        </th>
        <th>
            @Html.Label("contraseña")
        </th>
        <th>
            @Html.Label("activo")
        </th>
        @*<th>
            @Html.Label("update user id")
        </th>
        <th>
            @Html.Label("update date")
        </th>*@
        <th></th>
    </tr>

    @if (@Model.list.Count() == 0)
    {
        <tr>
            <td colspan="10">no se encontraron registros.</td>
        </tr>
    }
    else
    {
        foreach (var item in Model.list)
        {
<tr>
    @*<td>
        @Html.DisplayFor(modelItem => item.id)
    </td>*@
    <td>
        @Html.DisplayFor(modelItem => item.name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.user_name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.rol_description)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.password)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.active)
    </td>
    @*<td>
        @Html.DisplayFor(modelItem => item.update_user_id)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.update_date)
    </td>*@
    <td>
        @Html.ActionLink("Editar", "Edit", new { id = item.id }) |
        @Html.ActionLink("Detalles", "Details", new { id = item.id }) |
        @Html.ActionLink("Eliminar", "Delete", new { id = item.id })
    </td>
</tr>
        }
    }

</table>

@if (Model.list.ToList().Count > 0)
{
    if (Model.pagingInfo.TotalPages > 1)
    {
        <ul class="paginate pag1 clearfix">
            <li class="single">Pág. @Model.pagingInfo.CurrentPage de @Model.pagingInfo.TotalPages</li>
            @Html.PageLinks(Model.pagingInfo, x => Url.Action("Index", "Users", new { page = x, name = Model.name }))
        </ul>
    }
}





<!--@{
    ViewBag.Title = "Index";
    //Layout = "~/Views/Shared/_Login.cshtml";
}

<h2>Index</h2>

<table id="table_id" class="display">
    <thead>
        <tr>
            <th>name</th>
            <th>user name</th>
            <th>rol</th>
            <th>password</th>
            <th>active</th>
            <th>update user</th>
            <th>update date</th>
        </tr>
    </thead>
    <tbody>-->
@*<tr>
        <td>Row 1 Data 1</td>
        <td>Row 1 Data 2</td>
    </tr>
    <tr>
        <td>Row 2 Data 1</td>
        <td>Row 2 Data 2</td>
    </tr>*@
<!--</tbody>
</table>


@section scripts{
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.24/b-1.7.0/b-print-1.7.0/datatables.min.js"></script>

    <script type="text/javascript" src="https://cdn.datatables.net/select/1.3.3/js/dataTables.select.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/datetime/1.0.2/js/dataTables.dateTime.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>

    <script type="text/javascript" src="../../extensions/Editor/js/dataTables.editor.min.js"></script>-->
@*https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js
    https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js
    https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js
    https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js
    https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js*@
<!--<script>
        $(document).ready(function () {
            $("#table_id").DataTable({
                "processing": false,
                "serverSide": true,
                language: {
                    processing: "Procesando...",
                    search: "Buscar&nbsp;:",
                    lengthMenu: "Mostrar _MENU_ registros",
                    info: "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                    infoEmpty: "Mostrando registros del 0 al 0 de un total de 0 registros",
                    infoFiltered: "(filtrado de un total de _MAX_ registros)",
                    infoPostFix: "",
                    loadingRecords: "Cargando...",
                    zeroRecords: "No se encontraron resultados",
                    emptyTable: "Ningún dato disponible en esta tabla",
                    paginate: {
                        first: "Primero",
                        previous: "Anterior",
                        next: "Siguiente",
                        last: "Último"
                    },
                    aria: {
                        sortAscending: ": Activar para ordenar la columna de manera ascendente",
                        sortDescending: ": Activar para ordenar la columna de manera descendente"
                    }
                },
                "ajax": {
                    "url": "@Url.Content("~/Users/Json")",
                    "type": "POST",
                    "datatype":"json"
                },
                "pageLength": 1,
                "filter": true,
                "responsivePriority": 1,
                "data": null,
                "columns": [
                    { "data": "name", "name": "name", "autoWidth": true },
                    { "data": "user_name", "name": "user_name", "autoWidth": true },
                    { "data": "rol_description", "name": "rol_description", "autoWidth": true },
                    { "data": "password", "name": "password", "autoWidth": true },
                ],


                select: true

                //,
                //dom: 'Bfrtip'
                //,
                //buttons: [
                //    'copy', 'csv', 'excel', 'pdf', 'print'
                //]
            });
        })

    </script>

    -->
}




